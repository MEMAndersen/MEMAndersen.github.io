<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
  <title>Description of distFig</title>
  <meta name="keywords" content="distFig">
  <meta name="description" content="===== Syntax ============================================================">
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <meta name="generator" content="m2html &copy; 2005 Guillaume Flandin">
  <meta name="robots" content="index, follow">
  <link type="text/css" rel="stylesheet" href="../../../m2html.css">
  <script type="text/javascript">
    if (top.frames.length == 0) { top.location = "../../../index.html"; };
  </script>
</head>
<body>
<a name="_top"></a>
<!-- # mema_fela --><!-- # packages_external --><!-- menu.html dist_fig -->
<h1>distFig
</h1>

<h2><a name="_name"></a>PURPOSE <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
<div class="box"><strong>===== Syntax ============================================================</strong></div>

<h2><a name="_synopsis"></a>SYNOPSIS <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
<div class="box"><strong>function distFig(varargin) </strong></div>

<h2><a name="_description"></a>DESCRIPTION <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
<div class="fragment"><pre class="comment"> ===== Syntax ============================================================
 distFig(...,'Screen',Value)
 distFig(...,'Position',Value)

 distFig(...,'Rows',Value)
 distFig(...,'Columns',Value)

 distFig(...,'Not',Value)
 distFig(...,'Only',Value)
 distFig(...,'Offset',Value)

 distFig(...,'Adjust',Value)
 distFig(...,'Extra',Value)
 distFig(...,'Menu',Value)
 distFig(...,'Transpose',Value)
 distFig(...,'Simulink',Value)
 distFig(...,'Tight',Value)
 distFig(...,'Scale',Value)
 distFig(...,'ScaleOrigin',Value)
 distFig(...,'FreezeSize',Value)
 distFig(...,'Order',Value)

 ===== Description =======================================================
 distFig(...,'Screen',Value) assigns where the figures will be
 distributed.
 Synonyms for 'Screen' are 'Scr' and 'S'. Value can be:
 'C' / 'Center' (Default)
 'W' / 'West' / 'L' / 'Left'
 'E' / 'East' / 'R' / 'Right'
 'N' / 'North' / 'T' / 'Top'
 'S' / 'South' / 'B' / 'Bottom'
 'Main' / 'Primary'
 'Ext' / 'External' / 'Secondary'

 distFig(...,'Position',Value) assigns in which part of the screen the
 figures will be distributed.
 Synonyms for 'Position' are 'Pos' and 'P'. Value can be:
 'C' / 'Center' (Default)
 'W' / 'West' / 'L' / 'Left'
 'E' / 'East' / 'R' / 'Right'
 'N' / 'North' / 'T' / 'Top'
 'S' / 'South' / 'B' / 'Bottom'
 'NW'
 'NE'
 'SW'
 'SE'

 distFig(...,'Rows',Value) assigns how many rows the figures will be
 distributed on.
 Synonyms for 'Rows' are 'R'. Value can be:
 1...n
 'Auto' / -1
 'Auto' indicates that it automatically calculates the number of required
 rows.

 distFig(...,'Columns',Value) assigns how many rows the figures will be
 distributed on.
 Synonyms for 'Columns' are 'Cols' and 'C'. Value can be:
 1...n
 'Auto' / -1
 'Auto' indicates that it automatically calculates the number of required
 columns.

 distFig(...,'Not',Value) excludes specified figures from the distribution
 list. Value must be an array with the excluded figure numbers. The
 default value is []. The input argument 'gcf' (get current figure) can be
 used as well. 

 distFig(...,'Only',Value) does only distribute specified figures. Value
 must be an array with the figure which will be distributed. The
 default value is []. The input argument 'gcf' (get current figure) can be
 used as well. 

 distFig(...,'Offset',Value) can be used to shift all figures on the
 distribution list. Synonyms for 'Offset' is 'O'. Value must be an integer
 larger or equal to zero. The default offset value is 0.

 distFig(...,'Adjust',Value) can be used to adjust all figure positions. 
 For instance, if all figures should be moved 20 pixels to the right,
 which is not possible with the other features, Value should be [20,0].
 If Value is below 1, the scalars indicate the relative adjustment to the
 screen. If the selected monitor is [1920,1080] pixels, a Values of 
 [0.25,-0.5] moves all figures with [480,540] pixels.
 Synonyms for 'Ajust' is 'A'. Value can be:
 [Integer,Integer] (In order to adjust by a specific ammount)
 [Scalar,Scalar]( &lt; 1) (To adjust a relative ammount of the monitor size)
 The default value is [0,0].
 
 distFig(...,'Extra',Value) is used to handle the extra figures, which
 might not fit into 'Rows' * 'Cols'. For instance, 5 figure are to be
 distributed on a 2x2 = 4 area. The fifth figure is then places on top of
 the first figure if 'Extra' is 'restart'. It can be ignored by setting
 'Extra' to 'ignore', in which the fifth figure will not be distributed.

 distFig(...,'Menu',Value) can be used to modify the menu bar.
 Value can be:
 'figure'
 'none'

 distFig(...,'Transpose',Value) can be used to tranpose the order of
 distributing. The values must be logical and the default value is false.

 distFig(...,'Simulink',Value) can be used to handle simulink figures.
 Value can be:
 'include' (Default)
 'exclude'
 'only'
 If value is true, simulink figures will be distributed along with the
 other figures. If value if 'exclude' simulink figures will be
 excluded from the distribution list. If value is 'only', only the
 simulink figures will be distributed and not the ordinary figures.

 distFig(...,'Tight',Value) can be used to stretch the figure to the
 border of the figure, so no unnecessary &quot;whitespace&quot; is present.
 Value must be logical and the default value if false.

 distFig(...,'Scale',Value) can be used to scale the figure matrix. Both
 horizontal and vertical scaling can be applied, but also similar scaling.
 Value is a single scalar for similar scaling, but is a 2x1 matrix for
 specific scaling in each direction. For instance, distFig('Scale',0.5)
 scales all figures by 50% relative to the upper left corner of the 
 distribution area (Default Scale-origin). distFig('Scale',[0.8,0.4])
 scales the figures by 80% and 40% in the horizontal and vertical 
 directions respectivly relative to the default scale-origin. 
 
 distFig(...,'ScaleOrigin',Value) can be used in combination with the 
 'Scale' option. Value is a 2x1 matrix with the origin. If these values
 are between 0 and 1 the relative monitor size is used, whereas larger
 values should be rounded indicating pixel values. For instance, 
 distFig('Scale',0.5,'ScaleOrigin',[0.5,1]) scales the figures relative 
 to the midpoint on the right hand side of the selected monitor. For a
 monitor with resolution 1920x1080, this would be equal to 
 distFig('Scale',0.5,'ScaleOrigin',[1920,960]).
 The default scale origin is in the upper left corner of the distribution
 area.
 Synonyms for 'ScaleOrigin' are 'Origin', 'Orig' and 'Scaleorig'.
 
 distFig(...,'FreezeSize',Value) can be used to freeze the sizes of the
 figures before distribution. Currently, this function anchors the figures
 to the upper left corner of the original position, yet keeping the 
 original size - it does not calculate new positions, so the figures may
 overlap. 
 Synonym for 'FreezeSize' is 'Freeze'. 
 
 distFig(...,'Order',Value) can be used to control the plotting order. For
 instance, distFig('Only',[5,6,7,8],'Order',[2,1,4,3]) will plot figure
 5,6,7 and 8 in the order of 6,5,8 and 7. The ordering argument is thus
 related to the input of 'Only'. 
 
 ===== Examples ==========================================================
 distFig();
 This will distribute all open figures on the primary screen in two rows.

 distFig('Screen','Left','Position','Right','Only',[1,2,4])
 This will only distribute figure 1, 2 and 4 on the right part of the left
 screen.

 distFig('Offset',2,'Not',[1,2])
 This will distribute all figure but figure 1 and 2 in the same pattern as
 distFig(), but figure 1 and 2 will not be distributed, but instead there will
 be blank spots where they would have been distributed.
 
 ===== Note ==============================================================
 If you find any errors or bugs with this version please contact me on
 AndersSSimonsen@GMail.com or write a comment on file exchange - then I'll
 take a look at it. :)
 
 This function will only work in MATLAB 2014b and onwards due to the
 massive overhaul in the figure handle system - I will not support
 previous versions.</pre></div>

<!-- crossreference -->
<h2><a name="_cross"></a>CROSS-REFERENCE INFORMATION <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
This function calls:
<ul style="list-style-image:url(../../../matlabicon.gif)">
</ul>
This function is called by:
<ul style="list-style-image:url(../../../matlabicon.gif)">
<li><a href="../../../mema_fela/fela/fela_post.html" class="code" title="function fela_post(sol, prob, varargin)">fela_post</a>	fela_post: Post processing of solution, matlat plots or vtk files are</li><li><a href="Sample.html" class="code" title="">Sample</a>	</li></ul>
<!-- crossreference -->



<h2><a name="_source"></a>SOURCE CODE <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
<div class="fragment"><pre>0001 <a name="_sub0" href="#_subfunctions" class="code">function distFig(varargin)</a>
0002 <span class="comment">% ===== Syntax ============================================================</span>
0003 <span class="comment">% distFig(...,'Screen',Value)</span>
0004 <span class="comment">% distFig(...,'Position',Value)</span>
0005 <span class="comment">%</span>
0006 <span class="comment">% distFig(...,'Rows',Value)</span>
0007 <span class="comment">% distFig(...,'Columns',Value)</span>
0008 <span class="comment">%</span>
0009 <span class="comment">% distFig(...,'Not',Value)</span>
0010 <span class="comment">% distFig(...,'Only',Value)</span>
0011 <span class="comment">% distFig(...,'Offset',Value)</span>
0012 <span class="comment">%</span>
0013 <span class="comment">% distFig(...,'Adjust',Value)</span>
0014 <span class="comment">% distFig(...,'Extra',Value)</span>
0015 <span class="comment">% distFig(...,'Menu',Value)</span>
0016 <span class="comment">% distFig(...,'Transpose',Value)</span>
0017 <span class="comment">% distFig(...,'Simulink',Value)</span>
0018 <span class="comment">% distFig(...,'Tight',Value)</span>
0019 <span class="comment">% distFig(...,'Scale',Value)</span>
0020 <span class="comment">% distFig(...,'ScaleOrigin',Value)</span>
0021 <span class="comment">% distFig(...,'FreezeSize',Value)</span>
0022 <span class="comment">% distFig(...,'Order',Value)</span>
0023 <span class="comment">%</span>
0024 <span class="comment">% ===== Description =======================================================</span>
0025 <span class="comment">% distFig(...,'Screen',Value) assigns where the figures will be</span>
0026 <span class="comment">% distributed.</span>
0027 <span class="comment">% Synonyms for 'Screen' are 'Scr' and 'S'. Value can be:</span>
0028 <span class="comment">% 'C' / 'Center' (Default)</span>
0029 <span class="comment">% 'W' / 'West' / 'L' / 'Left'</span>
0030 <span class="comment">% 'E' / 'East' / 'R' / 'Right'</span>
0031 <span class="comment">% 'N' / 'North' / 'T' / 'Top'</span>
0032 <span class="comment">% 'S' / 'South' / 'B' / 'Bottom'</span>
0033 <span class="comment">% 'Main' / 'Primary'</span>
0034 <span class="comment">% 'Ext' / 'External' / 'Secondary'</span>
0035 <span class="comment">%</span>
0036 <span class="comment">% distFig(...,'Position',Value) assigns in which part of the screen the</span>
0037 <span class="comment">% figures will be distributed.</span>
0038 <span class="comment">% Synonyms for 'Position' are 'Pos' and 'P'. Value can be:</span>
0039 <span class="comment">% 'C' / 'Center' (Default)</span>
0040 <span class="comment">% 'W' / 'West' / 'L' / 'Left'</span>
0041 <span class="comment">% 'E' / 'East' / 'R' / 'Right'</span>
0042 <span class="comment">% 'N' / 'North' / 'T' / 'Top'</span>
0043 <span class="comment">% 'S' / 'South' / 'B' / 'Bottom'</span>
0044 <span class="comment">% 'NW'</span>
0045 <span class="comment">% 'NE'</span>
0046 <span class="comment">% 'SW'</span>
0047 <span class="comment">% 'SE'</span>
0048 <span class="comment">%</span>
0049 <span class="comment">% distFig(...,'Rows',Value) assigns how many rows the figures will be</span>
0050 <span class="comment">% distributed on.</span>
0051 <span class="comment">% Synonyms for 'Rows' are 'R'. Value can be:</span>
0052 <span class="comment">% 1...n</span>
0053 <span class="comment">% 'Auto' / -1</span>
0054 <span class="comment">% 'Auto' indicates that it automatically calculates the number of required</span>
0055 <span class="comment">% rows.</span>
0056 <span class="comment">%</span>
0057 <span class="comment">% distFig(...,'Columns',Value) assigns how many rows the figures will be</span>
0058 <span class="comment">% distributed on.</span>
0059 <span class="comment">% Synonyms for 'Columns' are 'Cols' and 'C'. Value can be:</span>
0060 <span class="comment">% 1...n</span>
0061 <span class="comment">% 'Auto' / -1</span>
0062 <span class="comment">% 'Auto' indicates that it automatically calculates the number of required</span>
0063 <span class="comment">% columns.</span>
0064 <span class="comment">%</span>
0065 <span class="comment">% distFig(...,'Not',Value) excludes specified figures from the distribution</span>
0066 <span class="comment">% list. Value must be an array with the excluded figure numbers. The</span>
0067 <span class="comment">% default value is []. The input argument 'gcf' (get current figure) can be</span>
0068 <span class="comment">% used as well.</span>
0069 <span class="comment">%</span>
0070 <span class="comment">% distFig(...,'Only',Value) does only distribute specified figures. Value</span>
0071 <span class="comment">% must be an array with the figure which will be distributed. The</span>
0072 <span class="comment">% default value is []. The input argument 'gcf' (get current figure) can be</span>
0073 <span class="comment">% used as well.</span>
0074 <span class="comment">%</span>
0075 <span class="comment">% distFig(...,'Offset',Value) can be used to shift all figures on the</span>
0076 <span class="comment">% distribution list. Synonyms for 'Offset' is 'O'. Value must be an integer</span>
0077 <span class="comment">% larger or equal to zero. The default offset value is 0.</span>
0078 <span class="comment">%</span>
0079 <span class="comment">% distFig(...,'Adjust',Value) can be used to adjust all figure positions.</span>
0080 <span class="comment">% For instance, if all figures should be moved 20 pixels to the right,</span>
0081 <span class="comment">% which is not possible with the other features, Value should be [20,0].</span>
0082 <span class="comment">% If Value is below 1, the scalars indicate the relative adjustment to the</span>
0083 <span class="comment">% screen. If the selected monitor is [1920,1080] pixels, a Values of</span>
0084 <span class="comment">% [0.25,-0.5] moves all figures with [480,540] pixels.</span>
0085 <span class="comment">% Synonyms for 'Ajust' is 'A'. Value can be:</span>
0086 <span class="comment">% [Integer,Integer] (In order to adjust by a specific ammount)</span>
0087 <span class="comment">% [Scalar,Scalar]( &lt; 1) (To adjust a relative ammount of the monitor size)</span>
0088 <span class="comment">% The default value is [0,0].</span>
0089 <span class="comment">%</span>
0090 <span class="comment">% distFig(...,'Extra',Value) is used to handle the extra figures, which</span>
0091 <span class="comment">% might not fit into 'Rows' * 'Cols'. For instance, 5 figure are to be</span>
0092 <span class="comment">% distributed on a 2x2 = 4 area. The fifth figure is then places on top of</span>
0093 <span class="comment">% the first figure if 'Extra' is 'restart'. It can be ignored by setting</span>
0094 <span class="comment">% 'Extra' to 'ignore', in which the fifth figure will not be distributed.</span>
0095 <span class="comment">%</span>
0096 <span class="comment">% distFig(...,'Menu',Value) can be used to modify the menu bar.</span>
0097 <span class="comment">% Value can be:</span>
0098 <span class="comment">% 'figure'</span>
0099 <span class="comment">% 'none'</span>
0100 <span class="comment">%</span>
0101 <span class="comment">% distFig(...,'Transpose',Value) can be used to tranpose the order of</span>
0102 <span class="comment">% distributing. The values must be logical and the default value is false.</span>
0103 <span class="comment">%</span>
0104 <span class="comment">% distFig(...,'Simulink',Value) can be used to handle simulink figures.</span>
0105 <span class="comment">% Value can be:</span>
0106 <span class="comment">% 'include' (Default)</span>
0107 <span class="comment">% 'exclude'</span>
0108 <span class="comment">% 'only'</span>
0109 <span class="comment">% If value is true, simulink figures will be distributed along with the</span>
0110 <span class="comment">% other figures. If value if 'exclude' simulink figures will be</span>
0111 <span class="comment">% excluded from the distribution list. If value is 'only', only the</span>
0112 <span class="comment">% simulink figures will be distributed and not the ordinary figures.</span>
0113 <span class="comment">%</span>
0114 <span class="comment">% distFig(...,'Tight',Value) can be used to stretch the figure to the</span>
0115 <span class="comment">% border of the figure, so no unnecessary &quot;whitespace&quot; is present.</span>
0116 <span class="comment">% Value must be logical and the default value if false.</span>
0117 <span class="comment">%</span>
0118 <span class="comment">% distFig(...,'Scale',Value) can be used to scale the figure matrix. Both</span>
0119 <span class="comment">% horizontal and vertical scaling can be applied, but also similar scaling.</span>
0120 <span class="comment">% Value is a single scalar for similar scaling, but is a 2x1 matrix for</span>
0121 <span class="comment">% specific scaling in each direction. For instance, distFig('Scale',0.5)</span>
0122 <span class="comment">% scales all figures by 50% relative to the upper left corner of the</span>
0123 <span class="comment">% distribution area (Default Scale-origin). distFig('Scale',[0.8,0.4])</span>
0124 <span class="comment">% scales the figures by 80% and 40% in the horizontal and vertical</span>
0125 <span class="comment">% directions respectivly relative to the default scale-origin.</span>
0126 <span class="comment">%</span>
0127 <span class="comment">% distFig(...,'ScaleOrigin',Value) can be used in combination with the</span>
0128 <span class="comment">% 'Scale' option. Value is a 2x1 matrix with the origin. If these values</span>
0129 <span class="comment">% are between 0 and 1 the relative monitor size is used, whereas larger</span>
0130 <span class="comment">% values should be rounded indicating pixel values. For instance,</span>
0131 <span class="comment">% distFig('Scale',0.5,'ScaleOrigin',[0.5,1]) scales the figures relative</span>
0132 <span class="comment">% to the midpoint on the right hand side of the selected monitor. For a</span>
0133 <span class="comment">% monitor with resolution 1920x1080, this would be equal to</span>
0134 <span class="comment">% distFig('Scale',0.5,'ScaleOrigin',[1920,960]).</span>
0135 <span class="comment">% The default scale origin is in the upper left corner of the distribution</span>
0136 <span class="comment">% area.</span>
0137 <span class="comment">% Synonyms for 'ScaleOrigin' are 'Origin', 'Orig' and 'Scaleorig'.</span>
0138 <span class="comment">%</span>
0139 <span class="comment">% distFig(...,'FreezeSize',Value) can be used to freeze the sizes of the</span>
0140 <span class="comment">% figures before distribution. Currently, this function anchors the figures</span>
0141 <span class="comment">% to the upper left corner of the original position, yet keeping the</span>
0142 <span class="comment">% original size - it does not calculate new positions, so the figures may</span>
0143 <span class="comment">% overlap.</span>
0144 <span class="comment">% Synonym for 'FreezeSize' is 'Freeze'.</span>
0145 <span class="comment">%</span>
0146 <span class="comment">% distFig(...,'Order',Value) can be used to control the plotting order. For</span>
0147 <span class="comment">% instance, distFig('Only',[5,6,7,8],'Order',[2,1,4,3]) will plot figure</span>
0148 <span class="comment">% 5,6,7 and 8 in the order of 6,5,8 and 7. The ordering argument is thus</span>
0149 <span class="comment">% related to the input of 'Only'.</span>
0150 <span class="comment">%</span>
0151 <span class="comment">% ===== Examples ==========================================================</span>
0152 <span class="comment">% distFig();</span>
0153 <span class="comment">% This will distribute all open figures on the primary screen in two rows.</span>
0154 <span class="comment">%</span>
0155 <span class="comment">% distFig('Screen','Left','Position','Right','Only',[1,2,4])</span>
0156 <span class="comment">% This will only distribute figure 1, 2 and 4 on the right part of the left</span>
0157 <span class="comment">% screen.</span>
0158 <span class="comment">%</span>
0159 <span class="comment">% distFig('Offset',2,'Not',[1,2])</span>
0160 <span class="comment">% This will distribute all figure but figure 1 and 2 in the same pattern as</span>
0161 <span class="comment">% distFig(), but figure 1 and 2 will not be distributed, but instead there will</span>
0162 <span class="comment">% be blank spots where they would have been distributed.</span>
0163 <span class="comment">%</span>
0164 <span class="comment">% ===== Note ==============================================================</span>
0165 <span class="comment">% If you find any errors or bugs with this version please contact me on</span>
0166 <span class="comment">% AndersSSimonsen@GMail.com or write a comment on file exchange - then I'll</span>
0167 <span class="comment">% take a look at it. :)</span>
0168 <span class="comment">%</span>
0169 <span class="comment">% This function will only work in MATLAB 2014b and onwards due to the</span>
0170 <span class="comment">% massive overhaul in the figure handle system - I will not support</span>
0171 <span class="comment">% previous versions.</span>
0172 
0173 <span class="comment">% =========================================================================</span>
0174 <span class="comment">% ===== Version ===========================================================</span>
0175 <span class="comment">% =========================================================================</span>
0176 
0177 <span class="comment">% Anders Schou Simonsen, AndersSSimonsen@GMail.com</span>
0178 <span class="comment">% Version 5.5</span>
0179 <span class="comment">% 31/03-2015</span>
0180 
0181 <span class="comment">% =========================================================================</span>
0182 <span class="comment">% ===== Default values ====================================================</span>
0183 <span class="comment">% =========================================================================</span>
0184 
0185 Rows = -1;
0186 Cols = -1;
0187 Scr = <span class="string">'C'</span>;
0188 Pos = <span class="string">'C'</span>;
0189 Tight = false;
0190 Menu = <span class="string">''</span>;
0191 Transpose = false;
0192 Extra = <span class="string">'restart'</span>;
0193 Offset = 0;
0194 Not = [];
0195 Only = [];
0196 Simulink = <span class="string">'include'</span>;
0197 Adjust = [0,0];
0198 Scale = 1;
0199 Scale_Orig = [];
0200 FreezeSize = false;
0201 Order = [];  
0202 
0203 <span class="comment">% =========================================================================</span>
0204 <span class="comment">% ===== Get inputs ========================================================</span>
0205 <span class="comment">% =========================================================================</span>
0206 
0207 <span class="keyword">if</span> (mod(nargin,2) ~= 0)
0208     error(<span class="string">'Uneven number of inputs! Returning...'</span>);
0209 <span class="keyword">end</span>
0210 
0211 <span class="keyword">for</span> i = 1:2:nargin
0212     <span class="keyword">if</span> (ischar(varargin{i+1}))
0213         varargin{i+1} = lower(varargin{i+1});
0214     <span class="keyword">end</span>
0215     <span class="keyword">switch</span> lower(varargin{i})
0216         <span class="keyword">case</span> {<span class="string">'scr'</span>,<span class="string">'screen'</span>,<span class="string">'s'</span>}
0217             <span class="comment">% =============================================================</span>
0218             Allow = {
0219                 <span class="string">'C'</span>        <span class="string">'c'</span>        <span class="string">'center'</span>    <span class="string">'main'</span>        <span class="string">'primary'</span>
0220                 <span class="string">'W'</span>        <span class="string">'w'</span>        <span class="string">'west'</span>        <span class="string">'l'</span>            <span class="string">'left'</span>
0221                 <span class="string">'E'</span>        <span class="string">'e'</span>        <span class="string">'east'</span>        <span class="string">'r'</span>            <span class="string">'right'</span>
0222                 <span class="string">'N'</span>        <span class="string">'n'</span>        <span class="string">'north'</span>        <span class="string">'t'</span>            <span class="string">'top'</span>
0223                 <span class="string">'S'</span>        <span class="string">'s'</span>        <span class="string">'south'</span>        <span class="string">'b'</span>            <span class="string">'bottom'</span>
0224                 <span class="string">'Ext'</span>    <span class="string">'ext'</span>    <span class="string">'external'</span>    <span class="string">'secondary'</span>    NaN
0225                 };
0226             Trigger = any(strcmp(Allow,varargin{i+1}),2);
0227             <span class="keyword">if</span> (~any(Trigger))
0228                 warning(<span class="string">'Input ''%s'' not recognized for ''%s''!'</span>,varargin{i+1},varargin{i});
0229             <span class="keyword">else</span>
0230                 Scr = Allow{Trigger,1};
0231             <span class="keyword">end</span>
0232         <span class="keyword">case</span> {<span class="string">'pos'</span>,<span class="string">'position'</span>,<span class="string">'p'</span>}
0233             <span class="comment">% =============================================================</span>
0234             Allow = {
0235                 <span class="string">'C'</span>        <span class="string">'c'</span>        <span class="string">'center'</span>    NaN        NaN
0236                 <span class="string">'W'</span>        <span class="string">'w'</span>        <span class="string">'west'</span>        <span class="string">'l'</span>        <span class="string">'left'</span>
0237                 <span class="string">'E'</span>        <span class="string">'e'</span>        <span class="string">'east'</span>        <span class="string">'r'</span>        <span class="string">'right'</span>
0238                 <span class="string">'N'</span>        <span class="string">'n'</span>        <span class="string">'north'</span>        <span class="string">'t'</span>        <span class="string">'top'</span>
0239                 <span class="string">'S'</span>        <span class="string">'s'</span>        <span class="string">'south'</span>        <span class="string">'b'</span>        <span class="string">'bottom'</span>
0240                 <span class="string">'NW'</span>    <span class="string">'nw'</span>    NaN            NaN        NaN
0241                 <span class="string">'NE'</span>    <span class="string">'ne'</span>    NaN            NaN        NaN
0242                 <span class="string">'SW'</span>    <span class="string">'sw'</span>    NaN            NaN        NaN
0243                 <span class="string">'SE'</span>    <span class="string">'se'</span>    NaN            NaN        NaN
0244                 };
0245             Trigger = any(strcmp(Allow,varargin{i+1}),2);
0246             <span class="keyword">if</span> (~any(Trigger))
0247                 warning(<span class="string">'Input ''%s'' not recognized for ''%s''!'</span>,varargin{i+1},varargin{i});
0248             <span class="keyword">else</span>
0249                 Pos = Allow{Trigger,1};
0250             <span class="keyword">end</span>
0251         <span class="keyword">case</span> {<span class="string">'rows'</span>,<span class="string">'r'</span>}
0252             <span class="comment">% =============================================================</span>
0253             <span class="keyword">if</span> (strcmp(varargin{i+1},<span class="string">'auto'</span>))
0254                 Rows = -1;
0255             <span class="keyword">else</span>
0256                 <span class="keyword">if</span> ~((isnumeric(varargin{i+1})) &amp;&amp; (mod(varargin{i+1},1) == 0))
0257                     warning(<span class="string">'Input to ''%s'' must be a round numeric value!'</span>,varargin{i});
0258                 <span class="keyword">else</span>
0259                     Rows = varargin{i+1};
0260                 <span class="keyword">end</span>
0261             <span class="keyword">end</span>
0262         <span class="keyword">case</span> {<span class="string">'cols'</span>,<span class="string">'columns'</span>,<span class="string">'c'</span>}
0263             <span class="comment">% =============================================================</span>
0264             <span class="keyword">if</span> (strcmp(varargin{i+1},<span class="string">'auto'</span>))
0265                 Cols = -1;
0266             <span class="keyword">else</span>
0267                 <span class="keyword">if</span> ~((isnumeric(varargin{i+1})) &amp;&amp; (mod(varargin{i+1},1) == 0))
0268                     warning(<span class="string">'Input to ''%s'' must be a round numeric value!'</span>,varargin{i});
0269                 <span class="keyword">else</span>
0270                     Cols = varargin{i+1};
0271                 <span class="keyword">end</span>
0272             <span class="keyword">end</span>
0273         <span class="keyword">case</span> {<span class="string">'ext'</span>,<span class="string">'extra'</span>}
0274             <span class="comment">% =============================================================</span>
0275             Allow = {
0276                 <span class="string">'ignore'</span>
0277                 <span class="string">'restart'</span>
0278                 };
0279             Trigger = any(strcmp(Allow,varargin{i+1}),2);
0280             <span class="keyword">if</span> (~any(Trigger))
0281                 warning(<span class="string">'Input ''%s'' not recognized for ''%s''!'</span>,varargin{i+1},varargin{i});
0282             <span class="keyword">else</span>
0283                 Extra = Allow{Trigger,1};
0284             <span class="keyword">end</span>
0285         <span class="keyword">case</span> {<span class="string">'menu'</span>,<span class="string">'bar'</span>}
0286             <span class="comment">% =============================================================</span>
0287             Allow = {
0288                 <span class="string">'figure'</span>
0289                 <span class="string">'none'</span>
0290                 };
0291             Trigger = any(strcmp(Allow,varargin{i+1}),2);
0292             <span class="keyword">if</span> (~any(Trigger))
0293                 warning(<span class="string">'Input ''%s'' not recognized for ''%s''!'</span>,varargin{i+1},varargin{i});
0294             <span class="keyword">else</span>
0295                 Menu = Allow{Trigger,1};
0296             <span class="keyword">end</span>
0297         <span class="keyword">case</span> {<span class="string">'transpose'</span>}
0298             <span class="comment">% =============================================================</span>
0299             <span class="keyword">if</span> (~islogical(varargin{i+1}))
0300                 warning(<span class="string">'Input to ''%s'' must be logical!'</span>,varargin{i});
0301             <span class="keyword">else</span>
0302                 Transpose = varargin{i+1};
0303             <span class="keyword">end</span>
0304         <span class="keyword">case</span> {<span class="string">'offset'</span>,<span class="string">'o'</span>}
0305             <span class="comment">% =============================================================</span>
0306             <span class="keyword">if</span> ~((isnumeric(varargin{i+1})) &amp;&amp; (mod(varargin{i+1},1) == 0))
0307                 warning(<span class="string">'Input to ''%s'' must be a round numeric value!'</span>,varargin{i});
0308             <span class="keyword">else</span>
0309                 Offset = varargin{i+1};
0310             <span class="keyword">end</span>
0311         <span class="keyword">case</span> {<span class="string">'adjust'</span>,<span class="string">'a'</span>}
0312             <span class="comment">% =============================================================</span>
0313             <span class="keyword">if</span> ~(isnumeric(varargin{i+1}))
0314                 warning(<span class="string">'Input to ''%s'' must be numeric!'</span>,varargin{i});
0315             <span class="keyword">elseif</span> (numel(varargin{i+1}) ~= 2)
0316                 warning(<span class="string">'Input to ''%s'' must be a (1 x 2) matrix with integers or scalars less than one!'</span>,varargin{i});
0317             <span class="keyword">elseif</span> (all(mod(varargin{i+1},1) == 0))
0318                 Adjust = varargin{i+1};
0319             <span class="keyword">else</span>
0320                 <span class="keyword">if</span> (any(varargin{i+1} &gt; 1))
0321                     warning(<span class="string">'Input to ''%s'' must be either integers or scalars less than one!'</span>,varargin{i});
0322                 <span class="keyword">else</span>
0323                     Adjust = varargin{i+1};
0324                 <span class="keyword">end</span>
0325             <span class="keyword">end</span>
0326         <span class="keyword">case</span> {<span class="string">'not'</span>}
0327             <span class="comment">% =============================================================</span>
0328             <span class="keyword">if</span> ~((isnumeric(varargin{i+1}) &amp;&amp; all(mod(varargin{i+1},1) == 0)) || isobject(varargin{i+1}))
0329                 warning(<span class="string">'Input to ''%s'' must be round numeric values!'</span>,varargin{i});
0330             <span class="keyword">else</span>
0331                 <span class="keyword">if</span> (isobject(varargin{i+1}))
0332                     Not = get(varargin{i+1},<span class="string">'Number'</span>);
0333                     <span class="keyword">if</span> (iscell(Not))
0334                         Not = cell2mat(Not);
0335                     <span class="keyword">end</span>
0336                 <span class="keyword">else</span>
0337                     Not = varargin{i+1};
0338                 <span class="keyword">end</span>
0339             <span class="keyword">end</span>
0340         <span class="keyword">case</span> {<span class="string">'only'</span>}
0341             <span class="comment">% =============================================================</span>
0342             <span class="keyword">if</span> ~((isnumeric(varargin{i+1}) &amp;&amp; all(mod(varargin{i+1},1) == 0)) || isobject(varargin{i+1}))
0343                 warning(<span class="string">'Input to ''%s'' must be round numeric values!'</span>,varargin{i});
0344             <span class="keyword">else</span>
0345                 <span class="keyword">if</span> (isobject(varargin{i+1}))
0346                     Only = get(varargin{i+1},<span class="string">'Number'</span>);
0347                     <span class="keyword">if</span> (iscell(Only))
0348                         Only = cell2mat(Only);
0349                     <span class="keyword">end</span>
0350                 <span class="keyword">else</span>
0351                     Only = varargin{i+1};
0352                 <span class="keyword">end</span>
0353             <span class="keyword">end</span>
0354         <span class="keyword">case</span> {<span class="string">'simu'</span>,<span class="string">'simulink'</span>}
0355             <span class="comment">% =============================================================</span>
0356             Allow = {
0357                 <span class="string">'include'</span>    NaN
0358                 <span class="string">'exclude'</span>    <span class="string">'ignore'</span>
0359                 <span class="string">'only'</span>        NaN
0360                 };
0361             Trigger = any(strcmp(Allow,varargin{i+1}),2);
0362             <span class="keyword">if</span> (~any(Trigger))
0363                 warning(<span class="string">'Input ''%s'' not recognized for ''%s''!'</span>,varargin{i+1},varargin{i});
0364             <span class="keyword">else</span>
0365                 Simulink = Allow{Trigger,1};
0366             <span class="keyword">end</span>
0367         <span class="keyword">case</span> {<span class="string">'tight'</span>}
0368             <span class="comment">% =============================================================</span>
0369             <span class="keyword">if</span> (~islogical(varargin{i+1}))
0370                 warning(<span class="string">'Input to ''%s'' must be logical!'</span>,varargin{i});
0371             <span class="keyword">else</span>
0372                 Tight = varargin{i+1};
0373             <span class="keyword">end</span>
0374         <span class="keyword">case</span> {<span class="string">'scale'</span>}
0375             <span class="comment">% =============================================================</span>
0376             <span class="keyword">if</span> (~isnumeric(varargin{i+1}) || (numel(varargin{i+1}) &gt; 2))
0377                 warning(<span class="string">'Input to ''%s'' must be one or two numeric values (x and y scale)!'</span>,varargin{i});
0378             <span class="keyword">else</span>
0379                 Scale = varargin{i+1};
0380             <span class="keyword">end</span>
0381         <span class="keyword">case</span> {<span class="string">'origin'</span>,<span class="string">'orig'</span>,<span class="string">'scaleorig'</span>,<span class="string">'scaleorigin'</span>}
0382             <span class="comment">% =============================================================</span>
0383             <span class="keyword">if</span> (~isnumeric(varargin{i+1}) || (numel(varargin{i+1}) ~= 2))
0384                 warning(<span class="string">'Input to ''%s'' must be two numeric values (x0 and y0)!'</span>,varargin{i});
0385             <span class="keyword">else</span>
0386                 Scale_Orig = varargin{i+1};
0387             <span class="keyword">end</span>
0388         <span class="keyword">case</span> {<span class="string">'freezesize'</span>,<span class="string">'freeze'</span>}
0389             <span class="comment">% =============================================================</span>
0390             <span class="keyword">if</span> (~islogical(varargin{i+1}))
0391                 warning(<span class="string">'Input to ''%s'' must be logical!'</span>,varargin{i});
0392             <span class="keyword">else</span>
0393                 FreezeSize = varargin{i+1};
0394             <span class="keyword">end</span>
0395         <span class="keyword">case</span> {<span class="string">'order'</span>}
0396             <span class="comment">% =============================================================</span>
0397             <span class="keyword">if</span> ~(isnumeric(varargin{i+1}) &amp;&amp; all(mod(varargin{i+1},1) == 0))
0398                 warning(<span class="string">'Input to ''%s'' must be round numeric values!'</span>,varargin{i});
0399             <span class="keyword">else</span>
0400                 Order = varargin{i+1}; 
0401             <span class="keyword">end</span>
0402         <span class="keyword">otherwise</span>
0403             <span class="comment">% =============================================================</span>
0404             fprintf(<span class="string">'Input ''%s'' not recognized!'</span>,varargin{i});
0405     <span class="keyword">end</span>
0406 <span class="keyword">end</span>
0407 
0408 <span class="comment">% =========================================================================</span>
0409 <span class="comment">% ===== Constants =========================================================</span>
0410 <span class="comment">% =========================================================================</span>
0411 
0412 <span class="comment">% ===== Limits ============================================================</span>
0413 Limits = {<span class="keyword">...</span>
0414     <span class="string">'C'</span>        [0,1]        [0,1]
0415     <span class="string">'W'</span>        [0,0.5]        [0,1]
0416     <span class="string">'E'</span>        [0.5,1]        [0,1]
0417     <span class="string">'N'</span>        [0,1]        [0.5,1]
0418     <span class="string">'NW'</span>    [0,0.5]        [0.5,1]
0419     <span class="string">'NE'</span>    [0.5,1]        [0.5,1]
0420     <span class="string">'S'</span>        [0,1]        [0,0.5]
0421     <span class="string">'SW'</span>    [0,0.5]        [0,0.5]
0422     <span class="string">'SE'</span>    [0.5,1]        [0,0.5]
0423     };
0424 
0425 <span class="comment">% ===== Screen angles =====================================================</span>
0426 Screens = {<span class="keyword">...</span>
0427     (-pi * 1 / 4)    (+pi * 1 / 4)    <span class="string">'E'</span>
0428     (-pi * 3 / 4)    (-pi * 1 / 4)    <span class="string">'S'</span>
0429     (+pi * 1 / 4)    (+pi * 3 / 4)    <span class="string">'N'</span>
0430     (+pi * 3 / 4)    Inf                <span class="string">'W'</span>
0431     -Inf            (-pi * 3 / 4)    <span class="string">'W'</span>
0432     };
0433 
0434 <span class="comment">% ===== Taskbar height ====================================================</span>
0435 Taskbar_Height = 40;
0436 
0437 <span class="comment">% =========================================================================</span>
0438 <span class="comment">% ===== Figure list =======================================================</span>
0439 <span class="comment">% =========================================================================</span>
0440 
0441 <span class="comment">% ===== All figures =======================================================</span>
0442 Fig_Object = findall(0,<span class="string">'type'</span>,<span class="string">'figure'</span>);
0443 <span class="keyword">if</span> (isempty(Fig_Object))
0444     fprintf(<span class="string">'distFig: No figures to distribute!\n'</span>);
0445     <span class="keyword">return</span>;
0446 <span class="keyword">end</span>
0447 
0448 <span class="comment">% ===== Remove not visible figures ========================================</span>
0449 Visible = arrayfun(@(n) (strcmp(get(Fig_Object(n),<span class="string">'Visible'</span>),<span class="string">'on'</span>)),1:numel(Fig_Object));
0450 Fig_Object = Fig_Object(Visible);
0451 
0452 <span class="comment">% ===== Include simulink figures ==========================================</span>
0453 Fig_Number = {Fig_Object.Number};
0454 Empty = arrayfun(@(n) (isempty(Fig_Number{n})),1:numel(Fig_Number));
0455 Fig_Number(Empty) = {0};
0456 Fig_Number = cell2mat(Fig_Number);
0457 [~,Index] = sort(get(Fig_Object(Fig_Number == 0),<span class="string">'Name'</span>));
0458 Temp = find(Fig_Number == 0);
0459 Fig_Number(Temp(Index)) = -(numel(Index):(-1):1);
0460 
0461 <span class="comment">% ===== Logical distribution array ========================================</span>
0462 Fig_Dist = true(1,numel(Fig_Object));
0463 
0464 <span class="comment">% ===== Simulink figures ==================================================</span>
0465 <span class="keyword">if</span> strcmp(Simulink,<span class="string">'exclude'</span>)
0466     Fig_Dist = (Fig_Number &gt; 0);
0467 <span class="keyword">end</span>
0468 <span class="keyword">if</span> strcmp(Simulink,<span class="string">'only'</span>)
0469     Fig_Dist = (Fig_Number &lt; 0);
0470 <span class="keyword">end</span>
0471 
0472 <span class="comment">% ===== Not ===============================================================</span>
0473 Fig_Dist(ismember(Fig_Number,Not)) = false;
0474 
0475 <span class="comment">% ===== Only ==============================================================</span>
0476 <span class="keyword">if</span> (~isempty(Only))
0477     Fig_Dist(~ismember(Fig_Number,Only)) = false;
0478 <span class="keyword">end</span>
0479 
0480 <span class="comment">% ===== Number of figures =================================================</span>
0481 nFig_Dist = sum(Fig_Dist);
0482 
0483 <span class="comment">% ===== Return ============================================================</span>
0484 <span class="keyword">if</span> (nFig_Dist == 0)
0485     <span class="keyword">return</span>;
0486 <span class="keyword">end</span>
0487 
0488 <span class="comment">% =========================================================================</span>
0489 <span class="comment">% ===== Monitor ===========================================================</span>
0490 <span class="comment">% =========================================================================</span>
0491 
0492 <span class="comment">% ===== Get monitor positions =============================================</span>
0493 Monitors = get(0,<span class="string">'MonitorPositions'</span>);
0494 Monitors_Center = Monitors(:,1:2) + Monitors(:,3:4) / 2;
0495 Monitors_Label = cell(size(Monitors,1),1);
0496 
0497 <span class="comment">% ===== Center monitor ====================================================</span>
0498 Temp = sum(abs(Monitors(:,1:2) - 1),2);
0499 Trigger_C = find(Temp == min(Temp));
0500 Monitors_Label{Trigger_C} = <span class="string">'C'</span>;
0501 
0502 <span class="comment">% ===== External monitors =================================================</span>
0503 Dir = Monitors_Center - repmat(Monitors_Center(Trigger_C,:),size(Monitors_Center,1),1);
0504 Theta = atan2(Dir(:,2),Dir(:,1));
0505 <span class="keyword">for</span> i = 1:numel(Theta)
0506     <span class="keyword">if</span> (i ~= Trigger_C)
0507         Monitors_Label{i} = Screens{(Theta(i) &gt; [Screens{:,1}]) &amp; (Theta(i) &lt;= [Screens{:,2}]),3};
0508     <span class="keyword">end</span>
0509 <span class="keyword">end</span>
0510 
0511 <span class="comment">% ===== Select monitor ====================================================</span>
0512 Monitor = Monitors(strcmp(Monitors_Label,Scr),:);
0513 <span class="keyword">if</span> (isempty(Monitor))
0514     <span class="keyword">if</span> (strcmp(Scr,<span class="string">'Ext'</span>))
0515         <span class="keyword">if</span> (size(Monitors,1) == 1)
0516             warning(<span class="string">'No external monitor could be found!'</span>);
0517             Monitor = Monitors(1,:);
0518         <span class="keyword">else</span>
0519             Monitor = Monitors(find(~strcmp(Monitors_Label,<span class="string">'C'</span>),1,<span class="string">'first'</span>),:);
0520         <span class="keyword">end</span>
0521     <span class="keyword">else</span>
0522         warning([<span class="string">'Screen ''%s'' could not be found! (Using ''C'' instead)\nThe following monitors were identified: %s.\n'</span><span class="keyword">...</span>
0523             <span class="string">'If the function cannot find the monitor try and restart MATLAB - this will reset the monitor-matrix, which is being used by the function.'</span>],<span class="keyword">...</span>
0524             Scr,sprintf(<span class="string">'%s\b\b\b\b\b'</span>,sprintf(<span class="string">'''%s'' and '</span>,Monitors_Label{:})));
0525         Monitor = Monitors(strcmp(Monitors_Label,<span class="string">'C'</span>),:);
0526         <span class="keyword">if</span> (isempty(Monitor))
0527             warning([<span class="string">'distFig cannot find matching monitors - using the first one!'</span>,<span class="keyword">...</span>
0528                 <span class="string">'\nPlease report this problem to AndersSSimonsen@GMail.com, where you include this matrix:'</span>],0);
0529             disp(Monitors);
0530             Monitor = Monitors(1,:);
0531         <span class="keyword">end</span>
0532     <span class="keyword">end</span>
0533 <span class="keyword">end</span>
0534 
0535 <span class="comment">% =========================================================================</span>
0536 <span class="comment">% ===== Rows and columns ==================================================</span>
0537 <span class="comment">% =========================================================================</span>
0538 
0539 Limit = Limits(strcmp(Limits(:,1),Pos),:);
0540 <span class="keyword">if</span> ((Rows == (-1)) &amp;&amp; (Cols == (-1)))
0541     AR_Ideal = 1.2;
0542     AR_Mean = Inf;
0543     <span class="keyword">for</span> i = 1:50
0544         <span class="comment">% ===== Exception =================================================</span>
0545         <span class="keyword">if</span> ((nFig_Dist + Offset) == 4)
0546             Rows = 2;
0547             Cols = 2;
0548             <span class="keyword">break</span>;
0549         <span class="keyword">end</span>
0550         
0551         <span class="comment">% ===== Temporary rows and columns ================================</span>
0552         Rows = i;
0553         Cols = ceil((nFig_Dist + Offset) / Rows);
0554         
0555         <span class="comment">% ===== Sizes =====================================================</span>
0556         x = round(linspace(Limit{2}(1),Limit{2}(2),Cols + 1) * Monitor(3)) + 1;
0557         y = round(linspace(Limit{3}(1),Limit{3}(2),Rows + 1) * (Monitor(4) - Taskbar_Height)) + Taskbar_Height + 1;
0558         clear Size;
0559         [Size(:,:,1),Size(:,:,2)] = meshgrid(diff(x),diff(y));
0560         
0561         <span class="comment">% ===== Output ====================================================</span>
0562         AR_Mean_Prev = AR_Mean;
0563         AR_Mean = mean(mean(Size(:,:,1) ./ Size(:,:,2)));
0564         <span class="keyword">if</span> (AR_Mean &gt; AR_Ideal)
0565             AR_Error = abs([AR_Ideal - AR_Mean_Prev,AR_Ideal - AR_Mean]);
0566             <span class="keyword">if</span> (AR_Error(1) &lt; AR_Error(2))
0567                 Rows = i - 1;
0568             <span class="keyword">end</span>
0569             Cols = ceil((nFig_Dist + Offset) / Rows);
0570             clear Size;
0571             <span class="keyword">break</span>;
0572         <span class="keyword">end</span>
0573     <span class="keyword">end</span>
0574 <span class="keyword">elseif</span> (Rows == (-1))
0575     Rows = ceil((nFig_Dist + Offset) / Cols);
0576 <span class="keyword">elseif</span> (Cols == (-1))
0577     Cols = ceil((nFig_Dist + Offset) / Rows);
0578 <span class="keyword">end</span>
0579 
0580 <span class="comment">% =========================================================================</span>
0581 <span class="comment">% ===== Location matrix ===================================================</span>
0582 <span class="comment">% =========================================================================</span>
0583 
0584 Sets = ceil(nFig_Dist / (Rows * Cols) + Offset);
0585 Mat = nan(Rows,Cols,Sets);
0586 <span class="keyword">if</span> (Transpose)
0587     Mat = permute(Mat,[2,1,3]);
0588 <span class="keyword">end</span>
0589 <span class="keyword">if</span> (isempty(Order))
0590     Order = (1:sum(Fig_Dist));
0591 <span class="keyword">end</span>
0592 Temp = sort(Fig_Number(Fig_Dist));
0593 <span class="keyword">if</span> (max(Order) &gt; numel(Temp))
0594     error(<span class="string">'The ordering command is related to the input - not the actual figure numbers! Returning...'</span>);
0595 <span class="keyword">end</span>
0596 Mat((1:nFig_Dist) + Offset) = Temp(Order);
0597 <span class="keyword">if</span> (Transpose)
0598     Mat = permute(Mat,[2,1,3]);
0599 <span class="keyword">end</span>
0600 <span class="keyword">if</span> (strcmp(Extra,<span class="string">'ignore'</span>))
0601     Sets = 1;
0602 <span class="keyword">end</span>
0603 
0604 <span class="comment">% =========================================================================</span>
0605 <span class="comment">% ===== Position and size =================================================</span>
0606 <span class="comment">% =========================================================================</span>
0607 
0608 <span class="comment">% ===== Grid ==============================================================</span>
0609 x = round(linspace(Limit{2}(1),Limit{2}(2),Cols + 1) * Monitor(3)) + 1;
0610 y = round(linspace(Limit{3}(1),Limit{3}(2),Rows + 1) * (Monitor(4) - Taskbar_Height)) + Taskbar_Height + 1;
0611 
0612 <span class="comment">% ===== Scale =============================================================</span>
0613 <span class="keyword">if</span> (isempty(Scale_Orig))
0614     Scale_Orig = [x(1),y(end)];
0615 <span class="keyword">end</span>
0616 <span class="keyword">if</span> ((all(mod(Scale_Orig,1) == 0)) &amp;&amp; (any(Scale_Orig &gt; 1)))
0617     ScaleOrig_Pixel = Scale_Orig;
0618 <span class="keyword">else</span>
0619     ScaleOrig_Pixel = Monitor(3:4) .* Scale_Orig;
0620 <span class="keyword">end</span>
0621 <span class="keyword">if</span> (numel(Scale) == 1)
0622     Scale(2) = Scale(1);
0623 <span class="keyword">end</span>
0624 x = (x - ScaleOrig_Pixel(1)) * Scale(1) + ScaleOrig_Pixel(1); 
0625 y = (y - ScaleOrig_Pixel(2)) * Scale(2) + ScaleOrig_Pixel(2); 
0626 
0627 <span class="comment">% ===== Positon ===========================================================</span>
0628 [FPos(:,:,1),FPos(:,:,2)] = meshgrid(x(1:end-1),y(1:end-1));
0629 FPos(:,:,2) = flipud(FPos(:,:,2));
0630 FPos(:,:,1) = FPos(:,:,1) + Monitor(1) - 1;
0631 FPos(:,:,2) = FPos(:,:,2) + Monitor(2) - 1;
0632 
0633 <span class="comment">% ===== Size ==============================================================</span>
0634 [Size(:,:,1),Size(:,:,2)] = meshgrid(diff(x),diff(y));
0635 
0636 <span class="comment">% ===== Adjust ============================================================</span>
0637 <span class="keyword">if</span> (any(Adjust ~= 0))
0638     <span class="keyword">if</span> (all(mod(Adjust,1) == 0))
0639         Adjust_Pixels = Adjust;
0640     <span class="keyword">else</span>
0641         Adjust_Pixels = round(Adjust .* (Monitor(3:4) + [0,-Taskbar_Height]));
0642     <span class="keyword">end</span>
0643 <span class="keyword">else</span>
0644     Adjust_Pixels = [0,0];
0645 <span class="keyword">end</span>
0646 
0647 <span class="comment">% =========================================================================</span>
0648 <span class="comment">% ===== Distribute figures ================================================</span>
0649 <span class="comment">% =========================================================================</span>
0650 
0651 <span class="keyword">for</span> s = 1:Sets
0652     <span class="keyword">for</span> i = 1:size(Mat,1)
0653         <span class="keyword">for</span> j = 1:size(Mat,2)
0654             <span class="keyword">if</span> (~isnan(Mat(i,j,s)))
0655                 <span class="comment">% ===== Position and figure ===============================</span>
0656                 Pos_Temp = [squeeze(FPos(i,j,:))' + Adjust_Pixels,squeeze(Size(i,j,:))'];
0657                 gcf_Temp = Fig_Object(Fig_Number == Mat(i,j,s));
0658                 gca_Temp = get(gcf_Temp,<span class="string">'CurrentAxes'</span>);
0659                 
0660                 <span class="comment">% ===== Freeze size =======================================</span>
0661                 <span class="keyword">if</span> (FreezeSize)
0662                     Pos_Orig = get(gcf_Temp,<span class="string">'Position'</span>);
0663                     Pos_Temp(2) = Pos_Temp(2) + Pos_Temp(4) - Pos_Orig(4);
0664                     Pos_Temp(3:4) = Pos_Orig(3:4);
0665                 <span class="keyword">end</span>
0666                 
0667                 <span class="comment">% ===== Focus figures to bring to front ===================</span>
0668                 figure(gcf_Temp);
0669                 
0670                 <span class="comment">% ===== Set units =========================================</span>
0671                 <span class="keyword">if</span> (~isempty(Menu))
0672                     set(gcf_Temp,<span class="string">'MenuBar'</span>,Menu);
0673                 <span class="keyword">end</span>
0674                 <span class="keyword">if</span> (Mat(i,j,s) &lt; 0)
0675                     drawnow;
0676                 <span class="keyword">end</span>
0677                 gca_Units_Prev = get(gca_Temp,<span class="string">'Units'</span>);
0678                 gcf_Units_Prev = get(gcf_Temp,<span class="string">'Units'</span>);
0679                 
0680                 <span class="comment">% ===== Distribute figure =================================</span>
0681                 set(gca_Temp,<span class="string">'Units'</span>,<span class="string">'normalized'</span>);
0682                 set(gcf_Temp,<span class="string">'Units'</span>,<span class="string">'pixels'</span>,<span class="string">'OuterPosition'</span>,Pos_Temp);
0683                 set(gcf_Temp,<span class="string">'Units'</span>,gcf_Units_Prev);
0684                 
0685                 <span class="comment">% ===== Apply tight =======================================</span>
0686                 <span class="keyword">if</span> ((Tight) &amp;&amp; (Mat(i,j,s) &gt; 0))
0687                     drawnow;
0688                     set(gca_Temp,<span class="string">'Position'</span>,[get(gca_Temp,<span class="string">'TightInset'</span>) * eye(4,2),1 - get(gca_Temp,<span class="string">'TightInset'</span>) * [1,0,1,0;0,1,0,1]']);
0689                 <span class="keyword">end</span>
0690                 set(gca_Temp,<span class="string">'Units'</span>,gca_Units_Prev);
0691             <span class="keyword">end</span>
0692         <span class="keyword">end</span>
0693     <span class="keyword">end</span>
0694 <span class="keyword">end</span>
0695 
0696 <span class="comment">% =========================================================================</span>
0697 <span class="comment">% ===== Check for new updates =============================================</span>
0698 <span class="comment">% =========================================================================</span>
0699 
0700 <span class="comment">% This feature check for a new version of distFig. It is only an attempt,</span>
0701 <span class="comment">% so it might not work without bugs. It can be disables by setting the</span>
0702 <span class="comment">% variable below called &quot;Update&quot; to &quot;false&quot; or by deleting this whole</span>
0703 <span class="comment">% section - this won't affect the rest of the function.</span>
0704 <span class="comment">%</span>
0705 <span class="comment">% It generates a .txt file called &quot;distFig_Update.txt&quot; located in the same</span>
0706 <span class="comment">% folder as distFig.m, which holds the date for the last time the function</span>
0707 <span class="comment">% checked for updates. In order to not check for updates all the time, the</span>
0708 <span class="comment">% function only does this ONCE every 7 days (variable &quot;Check_Interval&quot;),</span>
0709 <span class="comment">% and at max once for every started MATLAB session. Also, it uses appdata,</span>
0710 <span class="comment">% so if you're using this as well, it might display messages multiple times</span>
0711 <span class="comment">% within a session, if an update is available, if appdata is deleted.</span>
0712 <span class="comment">%</span>
0713 <span class="comment">% The update feature works by scanning the file exchange page for distFig</span>
0714 <span class="comment">% for a string value called &quot;datePublished&quot;, and compares it to the date of</span>
0715 <span class="comment">% the current version (variable &quot;Date_Current&quot;). If these are not the same,</span>
0716 <span class="comment">% a hyperlink will be shown to the function page on file exchange page. It</span>
0717 <span class="comment">% thus depends on a very specific format, which might differ(?) from</span>
0718 <span class="comment">% different languages - I'm not aware whether this is true, so please</span>
0719 <span class="comment">% contact me on AndersSSimonsen@GMail.com if you find this to be true, so I</span>
0720 <span class="comment">% can fix the feature. :)</span>
0721 
0722 <span class="comment">% ===== DISABLE THE UPDATE FEATURE BY SETTING THIS VALUE TO false =========</span>
0723 Update = false;
0724 <span class="comment">% ===== DISABLE THE UPDATE FEATURE BY SETTING THIS VALUE TO false =========</span>
0725 
0726 <span class="keyword">if</span> (Update)
0727     <span class="keyword">try</span>
0728         <span class="comment">% ===== Initialize ================================================</span>
0729         Date_Current = [2015,03,31];
0730         Check_Interval = 7;
0731         Check = false;
0732         
0733         <span class="comment">% ===== Path of update file =======================================</span>
0734         Path = mfilename(<span class="string">'fullpath'</span>);
0735         Path = sprintf(<span class="string">'%s\\distFig_Update.txt'</span>,Path(1:end-numel(<span class="string">'\distFig'</span>)));
0736         
0737         <span class="keyword">if</span> (isempty(getappdata(0,<span class="string">'distFig_Update'</span>)))
0738             <span class="comment">% ===== Set appdata ===========================================</span>
0739             setappdata(0,<span class="string">'distFig_Update'</span>,1);
0740             
0741             <span class="comment">% ===== Read update file ======================================</span>
0742             File_ID = fopen(Path,<span class="string">'r'</span>);
0743             Clock = clock;
0744             Date_Today = Clock(1:3);
0745             <span class="keyword">if</span> (File_ID == (-1))
0746                 <span class="comment">% ===== Generate update file ==============================</span>
0747                 File_ID = fopen(Path,<span class="string">'w'</span>);
0748                 fprintf(File_ID,<span class="string">'%d %d %d'</span>,Date_Today(1),Date_Today(2),Date_Today(3));
0749                 fclose(File_ID);
0750                 Check = true;
0751             <span class="keyword">else</span>
0752                 <span class="comment">% ===== Read last date ====================================</span>
0753                 Data = textscan(File_ID,<span class="string">'%s'</span>,<span class="string">'delimiter'</span>,<span class="string">''</span>);
0754                 <span class="keyword">if</span> (strcmp(Data{1},<span class="string">'DISABLE'</span>))
0755                     Check = false;
0756                 <span class="keyword">else</span>
0757                     Date_Last_Checked = cell2mat(textscan(Data{1}{1},<span class="string">'%f %f %f'</span>));
0758                     
0759                     <span class="comment">% ===== Write new date ================================</span>
0760                     File_ID = fopen(Path,<span class="string">'w'</span>);
0761                     fprintf(File_ID,<span class="string">'%d %d %d'</span>,Date_Today(1),Date_Today(2),Date_Today(3));
0762                     fclose(File_ID);
0763                     
0764                     <span class="comment">% ===== Check for new updates? ========================</span>
0765                     Days_Elapsed = etime([Date_Today,zeros(1,3)],[Date_Last_Checked,zeros(1,3)]) / (60^2 * 24);
0766                     <span class="keyword">if</span> (Days_Elapsed &gt; Check_Interval)
0767                         Check = true;
0768                     <span class="keyword">end</span>
0769                 <span class="keyword">end</span>
0770             <span class="keyword">end</span>
0771             
0772             <span class="comment">% ===== Check for updates =====================================</span>
0773             <span class="keyword">if</span> (Check)
0774                 <span class="comment">% ===== Read File Exchange date ===========================</span>
0775                 Data = urlread(<span class="string">'http://se.mathworks.com/matlabcentral/fileexchange/37176-distribute-figures'</span>);
0776                 Temp = Data((-1:100) + regexp(Data,<span class="string">'datePublished'</span>));
0777                 Date_Online = cell2mat(textscan(Temp(26:end),<span class="string">'%f-%f-%f'</span>));
0778                 
0779                 <span class="comment">% ===== New update available? =============================</span>
0780                 <span class="keyword">if</span> (~all(Date_Current == Date_Online))
0781                     setappdata(0,<span class="string">'distFig_Update'</span>,2);
0782                     setappdata(0,<span class="string">'distFig_Online_Date'</span>,Date_Online);
0783                 <span class="keyword">end</span>
0784             <span class="keyword">end</span>
0785         <span class="keyword">end</span>
0786         
0787         <span class="comment">% ===== Message ===================================================</span>
0788         <span class="keyword">if</span> (getappdata(0,<span class="string">'distFig_Update'</span>) == 2)
0789             <span class="keyword">try</span>
0790                 <span class="comment">% ===== New version =======================================</span>
0791                 Date_Online = getappdata(0,<span class="string">'distFig_Online_Date'</span>);
0792                 fprintf(<span class="string">'New update available for distFig! '</span>);
0793                 disp(<span class="string">'&lt;a href = &quot;http://se.mathworks.com/matlabcentral/fileexchange/37176-distribute-figures&quot;&gt;Download here&lt;/a&gt;'</span>)
0794                 fprintf(<span class="string">'\tCurrent version date:\t%02.0f-%02.0f-%02.0f\n'</span>,Date_Current(1),Date_Current(2),Date_Current(3));
0795                 fprintf(<span class="string">'\tOnline version date:\t%02.0f-%02.0f-%02.0f\n'</span>,Date_Online(1),Date_Online(2),Date_Online(3));
0796                 
0797                 <span class="comment">% ===== Postpone ==========================================</span>
0798                 fprintf(<span class="string">'Click here to postpone this message for %d days: '</span>,Check_Interval);
0799                 Command = sprintf([<span class="keyword">...</span>
0800                     <span class="string">'setappdata(0,''distFig_Update'',1);'</span>,<span class="keyword">...</span>
0801                     <span class="string">'fprintf(''distFig update message postponed for %d days!\\n'');'</span>
0802                     ],Check_Interval);
0803                 disp(sprintf(<span class="string">'&lt;a href=&quot;matlab:%s&quot;&gt;Postpone update message&lt;/a&gt;'</span>,Command)); <span class="comment">%#ok&lt;DSPS&gt;</span>
0804                 
0805                 <span class="comment">% ===== Disable ===========================================</span>
0806                 fprintf(<span class="string">'Click here to disable the update feature forever: '</span>);
0807                 Command = sprintf([<span class="keyword">...</span>
0808                     <span class="string">'File_ID = fopen(''%s'',''w'');'</span>,<span class="keyword">...</span>
0809                     <span class="string">'fprintf(File_ID,''DISABLE'');'</span>,<span class="keyword">...</span>
0810                     <span class="string">'fclose(File_ID);'</span>,<span class="keyword">...</span>
0811                     <span class="string">'setappdata(0,''distFig_Update'',1);'</span>,<span class="keyword">...</span>
0812                     <span class="string">'fprintf(''distFig update feature disabled!\\n'');'</span>
0813                     ],Path);
0814                 disp(sprintf(<span class="string">'&lt;a href=&quot;matlab:%s&quot;&gt;Disable update feature&lt;/a&gt;'</span>,Command)); <span class="comment">%#ok&lt;DSPS&gt;</span>
0815             <span class="keyword">catch</span>
0816                 setappdata(0,<span class="string">'distFig_Update'</span>,1);
0817             <span class="keyword">end</span>
0818         <span class="keyword">end</span>
0819     <span class="keyword">catch</span> Error <span class="comment">%#ok&lt;NASGU&gt;</span>
0820         <span class="comment">% ===== Error handling ============================================</span>
0821         <span class="keyword">try</span>
0822             Path_Error = [Path(1:end-numel(<span class="string">'\distFig_Update.txt'</span>)),<span class="string">'\distFig_Error.mat'</span>];
0823             fprintf([
0824                 <span class="string">'There was an error in distFig when checking for updates.'</span>,<span class="keyword">...</span>
0825                 <span class="string">'\nPlease report this to AndersSSimonsen@GMail.com by sending the error-file &quot;distFig_Error.mat&quot; located in %s. :)\n\n'</span>],Path_Error);
0826             AppData = getappdata(0); <span class="comment">%#ok&lt;NASGU&gt;</span>
0827             save(Path_Error);
0828         <span class="keyword">catch</span>
0829         <span class="keyword">end</span>
0830     <span class="keyword">end</span>
0831 <span class="keyword">end</span></pre></div>
<hr><address>Generated on Fri 16-Aug-2019 14:33:49 by <strong><a href="http://www.artefact.tk/software/matlab/m2html/" target="_parent">m2html</a></strong> &copy; 2005</address>
</body>
</html>